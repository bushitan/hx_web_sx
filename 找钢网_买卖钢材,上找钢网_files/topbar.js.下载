String.prototype.getStringLength=function(){var a=0;for(var b=0;b<this.length;b++){if(this.charCodeAt(b)>127||this.charCodeAt(b)==94){a+=2}else{a++}}return a};var ZGHeadTobarUtil={currentPageCompanyId:0,isShowSellerTag:"T",isShowRegisterText:true,switchLoginCompanySuccess:function(b,a){if(b!=null&&b.success){window.location.href=window.location.href}else{if(b!=null){alert(b.message)}}},showHeadToobarExtend:function(c,a,b){if(c&&ZGHeadTobarUtil.isShowRegisterText){showRegisterText()}},getLogoutJumpUrl:function(){return location.href},showTopMenu:function(){$("#zwg_topmenu").show()}};$(function(){if(typeof(ZGHeadTobarExtendUtil)!="undefined"){jQuery.extend(ZGHeadTobarUtil,ZGHeadTobarExtendUtil)}ZGHeadTobarUtil.showTopMenu();function a(){if(urlPath.zhaoGangSsoUrl&&urlPath.zhaoGangSsoUrl.length>1){return urlPath.zhaoGangSsoUrl}if(urlPath.domain&&urlPath.domain.indexOf("zhaogangtest.com")>-1){return"https://passport.zhaogangtest.com"}if(urlPath.domain&&urlPath.domain.indexOf("zhaogangmit.com")>-1){return"https://passport.zhaogangtest.com"}else{if(urlPath.domain&&urlPath.domain.indexOf("zhaoganguat.com")>-1){return"https://passport.zhaoganguat.com"}else{return"https://passport.zhaogang.com"}}}$("#mall_header .topmenu").on("click",".topQQLinkCss",function(){$("#toolbar-toptell")[0].click()});$("#topbar_login_btn").click(function(){var c=a();location.href=c+"/login/index?loginType=0&jump="+encodeURIComponent(location.href);return false});$("#topbar_register").click(function(){var c=a();location.href=c+"/register";return false});$("#topbar_quit").click(function(){var c=a();var d=ZGHeadTobarUtil.getLogoutJumpUrl();location.href=c+"/login/logout?loginType=0&jump="+encodeURIComponent(d)});var b={fn_company_list:function(){$(document).on({mouseenter:function(){$(this).addClass("active")},mouseleave:function(){$(this).removeClass("active")}},".topbar .toplink .company-list");$(document).on("click",".topbar .toplink .company-list-ul li",function(){var d=$(this).contents().filter(function(g,h){return h.nodeType===3}).text();var e=$(this).attr("encryptCompanyId");var c={companyName:$.trim(d),encryptCompanyId:e};var f=$(this);$.ajax({url:urlPath.memberUrl+"/loginHead/switchLoginCompany",dataType:"jsonp",type:"get",data:{encryptCompanyId:e},success:function(g){if(g!=null&&g.success){var h=f.find(".authority-tag").clone();f.parents(".company-list").find(".company-list-name").html(d);f.parents(".company-list").find(".authority").empty().append(h);f.parents(".company-list").removeClass("active");ZGHeadTobarUtil.currentPageCompanyId=g.data}ZGHeadTobarUtil.switchLoginCompanySuccess(g,c)},error:function(g,i,h){}})})},init:function(){this.fn_company_list()}};if($("#disabledTopbarSwitchLoginCompany").length==0||$("#disabledTopbarSwitchLoginCompany").val()!="T"){b.init()}showTopBar()});function showTopBar(){var a=ZGHeadTobarUtil.isShowSellerTag;$.ajax({url:urlPath.memberUrl+"/loginHead/queryHeadInfo",dataType:"jsonp",type:"get",data:{isShowSellerTag:a},success:function(f){if(f!=null&&f.success){var b=f.data.companyList;var d=f.data.accountName;var e=f.data.accountMobile;var c=f.data.accountLog;set_login_info(true,b,d,e,c)}else{set_login_info(false)}},error:function(b,d,c){}})}function set_login_info(h,e,j,c,g){if(h){if(!j){j=""}if(!c){c=""}var f="";var b="";if(e!=null&&e.length>0){b+="<ul class='company-list-ul'>";for(var d=0;d<e.length;d++){var a=e[d];b+='<li encryptCompanyId ="'+a.encryptCompanyId+'">';b+=(a.companyName+"&nbsp;");if(a.isCertification){b+="<i class='icon-header icon-header-qi active'></i>"}else{b+="<i class='icon-header icon-header-qi'></i>"}if(a.isShowSellerTag){b+="<span class='authority-tag authenticated'>卖家</span>"}b+="</li>";if(a.isLoginSelect){f="<span class='company-list-name'>"+a.companyName+"</span>";f+="<i class='icon icon-header-arrow'></i>";f+="<div class='authority'>";if(a.isCertification){f+="<i class='icon-header icon-header-qi active'></i>"}else{f+="<i class='icon-header icon-header-qi'></i>"}if(a.isShowSellerTag){f+="<span class='authority-tag authenticated'>卖家</span>"}f+="</div>";ZGHeadTobarUtil.currentPageCompanyId=a.companyId}}b+="</ul>"}if($("#disabledTopbarSwitchLoginCompany").length==0||$("#disabledTopbarSwitchLoginCompany").val()!="T"){$("#span_top_company_show").html(f+b)}else{$("#span_top_company_show").html(f);$("#span_top_company_show i").hide()}$("#topbar_userInfo").show();$("#topbar_userName").html(j);$("#topbar_usermobile").html(c);$("#topbar_greet").hide();if(g){$("#topbar_userLog").attr("src",g)}$("#topbar_login_btn,#topbar_register").hide();$("#span_top_company_show").show()}else{$("#topbar_greet").html("喵，欢迎来找钢");$("#span_top_company_show").empty();$("#span_top_company_show").hide()}ZGHeadTobarUtil.showHeadToobarExtend(h,e,j)}function _pub_all_member_error_alert(a){vipPopup.init();$("#pub_all_member_error_alert").html(a);$(".dialog_error").dialog("open");$(".buttonblue").unbind("click");$(".buttonblue").click(function(){$(".dialog_error").dialog("close")})}function showRegisterText(){var a=function(d){if(!d){return}if(typeof(UIpopup)=="undefined"){return}new UIpopup({width:600,height:450,closebtn:false,template:'<div class="dialog_agreement"><h2>找钢网用户注册协议</h2> <div class="text">'+d+'</div> <div class="btn"><a href="javascript:void(0);" id="btnReadAgreement" class="no">阅读并同意</a></div></div>'});$(".popup").css("z-index",99999);$("html").addClass("html_lock");var e=5,b=$("#btnReadAgreement");var c=setInterval(function(){b.text("阅读并同意("+e+")");e--;if(e==0){b.text("阅读并同意");b.removeClass("no");clearInterval(c)}},1000);$("body").on("click","#btnReadAgreement",function(){if(!$(this).hasClass("no")){$.getJSON(urlPath.memberUrl+"/loginHead/RegisterTextClicked?callback=?",{},function(f){});$(".mask, .popup").remove();$("html").removeClass("html_lock")}})};$.getJSON(urlPath.memberUrl+"/loginHead/RegisterTextShow?callback=?",{},function(b){if(b.ShowText){a(b.Content)}})}$("body").delegate(".topbar .my","mouseenter",function(){$(this).addClass("active").find("a[class='my_top'] i").addClass("open");$(this).find(".my_list").show()});$("body").delegate(".topbar .my","mouseleave",function(){$(this).removeClass("active").find("a[class='my_top'] i").removeClass("open");$(this).find(".my_list").hide()});function sub(d,e){var c=/[^\x00-\xff]/g;if(d.replace(c,"mm").length<=e){return d}var a=Math.floor(e/2);for(var b=a;b<d.length;b++){if(d.substr(0,b).replace(c,"mm").length>=e){return d.substr(0,b)+"..."}}return d};